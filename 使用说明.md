# 🚀 快速抢购工具使用指南

> **适合完全不会代码的朋友使用** - 按照步骤操作即可

---

## 📋 目录

1. [环境准备](#环境准备)
2. [手机设置](#手机设置)
3. [文件准备](#文件准备)
4. [使用步骤](#使用步骤)
5. [常见问题](#常见问题)

---

## 🔧 环境准备

### 第一步：安装 Python

1. **下载 Python**
   - 访问：https://www.python.org/downloads/
   - 下载最新版本的 Python（推荐 Python 3.10 或更高版本）
   - 下载后双击安装

2. **安装时注意事项**
   - ✅ **重要**：勾选 "Add Python to PATH"（添加到环境变量）
   - 点击 "Install Now" 完成安装

3. **验证安装**
   - 按 `Win + R` 键，输入 `cmd`，按回车
   - 在黑色窗口中输入：`python --version`
   - 如果显示版本号（如 `Python 3.10.x`），说明安装成功

### 第二步：安装 ADB 工具

ADB 是连接手机和电脑的工具，必须安装。

#### 方法一：下载 ADB 工具包（推荐，最简单）

1. **下载 ADB**
   - 访问：https://developer.android.com/studio/releases/platform-tools
   - 或者直接搜索 "platform-tools windows" 下载
   - 下载后解压到一个文件夹（例如：`C:\adb`）

2. **添加到环境变量**
   - 右键 "此电脑" → "属性" → "高级系统设置"
   - 点击 "环境变量"
   - 在 "系统变量" 中找到 `Path`，点击 "编辑"
   - 点击 "新建"，输入 ADB 文件夹路径（例如：`C:\adb`）
   - 点击 "确定" 保存

3. **验证安装**
   - 重新打开 cmd（关闭后重新打开）
   - 输入：`adb version`
   - 如果显示版本信息，说明安装成功

#### 方法二：通过 Android Studio（如果已安装）

- 如果已经安装了 Android Studio，ADB 通常已经包含在内
- 路径通常在：`C:\Users\你的用户名\AppData\Local\Android\Sdk\platform-tools`
- 将这个路径添加到环境变量即可

---

## 📱 手机设置

### 第一步：开启开发者选项

不同手机品牌略有不同，常见方法：

**小米/红米手机：**
1. 打开 "设置"
2. 点击 "我的设备" → "全部参数"
3. 连续点击 "MIUI版本" 7次
4. 提示 "您已成为开发者"

**华为/荣耀手机：**
1. 打开 "设置"
2. 点击 "关于手机"
3. 连续点击 "版本号" 7次
4. 提示 "您已处于开发者模式"

**OPPO/一加手机：**
1. 打开 "设置"
2. 点击 "关于手机"
3. 连续点击 "版本号" 7次

**vivo 手机：**
1. 打开 "设置"
2. 点击 "更多设置" → "关于手机"
3. 连续点击 "软件版本号" 7次

**其他品牌：**
- 一般都是在 "设置" → "关于手机" → 连续点击 "版本号" 7次

### 第二步：开启 USB 调试

1. 打开 "设置"
2. 找到 "开发者选项"（通常在 "系统" 或 "更多设置" 中）
3. 打开 "开发者选项"
4. ✅ 开启 "USB 调试"
5. ✅ 开启 "USB 安装"（如果有）
6. ✅ 开启 "USB 调试（安全设置）"（如果有）

### 第三步：连接手机

1. 用 USB 数据线连接手机和电脑
2. 手机上会弹出 "允许 USB 调试吗？" 的提示
3. ✅ **勾选 "始终允许使用这台计算机进行调试"**
4. 点击 "确定" 或 "允许"

---

## 📁 文件准备

### 第一步：获取脚本文件

确保以下文件都在同一个文件夹中：
- `adb_automation.py`
- `fast_click_snatch.py`
- `quick_start_adb.py`（可选，用于测试）
- `adb_coordinate_helper.py`（可选）

### 第二步：测试连接

1. 打开 cmd（按 `Win + R`，输入 `cmd`）
2. 切换到脚本文件夹
   ```
   cd D:\zhuxuwen\ticket_miniprogram
   ```
   （改成你的实际文件夹路径）
3. 输入命令测试连接：
   ```
   adb devices
   ```
4. 如果看到类似这样的输出，说明连接成功：
   ```
   List of devices attached
   xxxxxxxx    device
   ```
   （`xxxxxxxx` 是你的设备编号）

---

## 🎯 使用步骤

### 第一步：获取按钮坐标

在开始抢购之前，需要先知道抢购按钮在屏幕上的位置（坐标）。

#### 方法一：使用坐标辅助工具（推荐）

1. 打开 cmd，切换到脚本文件夹
2. 运行坐标辅助工具：
   ```
   python adb_coordinate_helper.py
   ```
3. 按照提示操作，工具会帮你找到按钮坐标

#### 方法二：手动获取坐标

1. 打开 cmd，切换到脚本文件夹
2. 运行快速开始脚本：
   ```
   python quick_start_adb.py
   ```
3. 脚本会自动截图，保存为 `quick_start_screenshot.png`
4. 打开截图文件，用图片查看器查看
5. 将鼠标移动到抢购按钮上，查看图片查看器底部显示的坐标
   - X 坐标：横坐标（从左到右）
   - Y 坐标：纵坐标（从上到下）

#### 方法三：使用 UI 层次结构（高级）

1. 运行命令：
   ```
   python -c "from adb_automation import ADBAutomation; auto = ADBAutomation(); auto.connect(); auto.get_ui_hierarchy('ui.xml')"
   ```
2. 打开生成的 `ui.xml` 文件
3. 搜索按钮的文字（如 "立即购买"、"抢购" 等）
4. 找到对应的 `bounds` 属性，计算中心点坐标

### 第二步：运行抢购脚本

1. **打开 cmd**，切换到脚本文件夹

2. **运行抢购脚本**：
   ```
   python fast_click_snatch.py
   ```

3. **按提示输入参数**：

   ```
   ============================================================
   🚀 快速抢购工具
   ============================================================
   
   📱 屏幕尺寸: 1080 x 2400
   
   ============================================================
   ⚙️  配置抢购参数
   ============================================================
   
   📍 请输入抢购按钮的坐标：
      按钮 X 坐标: 540        ← 输入你获取的 X 坐标
      按钮 Y 坐标: 1600       ← 输入你获取的 Y 坐标
   
   🧵 线程数量 (默认 5，建议 3-8): 5    ← 直接回车使用默认值
   🔄 刷新间隔 (每 N 次点击刷新，默认 10，0=不刷新): 10    ← 直接回车使用默认值
   ⏱️  最小延迟秒数 (默认 0.01):      ← 直接回车使用默认值
   ⏱️  最大延迟秒数 (默认 0.05):      ← 直接回车使用默认值
   ```

4. **确认配置**：
   ```
   ============================================================
   📋 配置确认
   ============================================================
   按钮坐标: (540, 1600)
   线程数量: 5
   刷新间隔: 每 10 次点击
   延迟范围: 0.010s - 0.050s
   ============================================================
   
   确认开始抢购？(y/n): y    ← 输入 y 确认
   ```

5. **开始抢购**：
   ```
   ⏰ 3秒后开始抢购...
      3...
      2...
      1...
   
   ============================================================
   🚀 高频点击器启动
   ============================================================
   按钮坐标: (540, 1600)
   线程数量: 5
   刷新间隔: 每 10 次点击
   延迟范围: 0.010s - 0.050s
   ============================================================
   按 Ctrl+C 停止...
   
   ⏱️  已运行: 1.0s | 总点击: 250 次 | 当前速度: 250.0 次/秒 | 平均速度: 250.0 次/秒
   ⏱️  已运行: 2.0s | 总点击: 500 次 | 当前速度: 250.0 次/秒 | 平均速度: 250.0 次/秒
   ...
   ```

6. **停止抢购**：
   - 按 `Ctrl + C` 停止
   - 脚本会显示总点击次数

---

## ⚙️ 参数说明

### 必须输入的参数

- **按钮 X 坐标**：抢购按钮在屏幕上的横坐标
- **按钮 Y 坐标**：抢购按钮在屏幕上的纵坐标

### 可选参数（可直接回车使用默认值）

- **线程数量**：同时点击的线程数
  - 默认：5
  - 建议：3-8
  - 说明：数字越大点击越快，但可能不稳定

- **刷新间隔**：每点击多少次后刷新页面
  - 默认：10
  - 说明：设置为 0 则不自动刷新

- **最小延迟**：每次点击之间的最小等待时间（秒）
  - 默认：0.01（10毫秒）

- **最大延迟**：每次点击之间的最大等待时间（秒）
  - 默认：0.05（50毫秒）

---

## ❓ 常见问题

### 问题1：提示 "设备连接失败"

**解决方法：**
1. 检查 USB 数据线是否连接正常
2. 检查手机是否开启了 USB 调试
3. 在手机上重新授权 USB 调试
4. 运行 `adb devices` 查看设备是否显示
5. 如果显示 `unauthorized`，在手机上点击 "允许"

### 问题2：提示 "python 不是内部或外部命令"

**解决方法：**
1. 检查 Python 是否安装
2. 检查安装时是否勾选了 "Add Python to PATH"
3. 如果没有勾选，需要重新安装 Python 并勾选该选项
4. 或者手动添加 Python 到环境变量

### 问题3：提示 "adb 不是内部或外部命令"

**解决方法：**
1. 检查 ADB 是否下载并解压
2. 检查是否添加到环境变量
3. 添加环境变量后需要**重新打开 cmd**
4. 运行 `adb version` 验证

### 问题4：点击位置不对

**解决方法：**
1. 重新获取按钮坐标
2. 确保手机屏幕没有旋转
3. 确保获取坐标时和抢购时屏幕状态一致
4. 可以先用 `quick_start_adb.py` 截图确认位置

### 问题5：点击速度很慢

**解决方法：**
1. 增加线程数量（但不要超过 8）
2. 减小延迟范围（但不要小于 0.01）
3. 检查手机性能，关闭其他应用

### 问题6：手机自动断开连接

**解决方法：**
1. 更换 USB 数据线（使用原装数据线）
2. 使用 USB 2.0 接口（不要用 USB 3.0）
3. 关闭手机的省电模式
4. 在开发者选项中关闭 "USB 调试（安全设置）" 的自动关闭

### 问题7：脚本运行后没有反应

**解决方法：**
1. 检查坐标是否正确
2. 确保手机屏幕是亮着的
3. 确保抢购页面已经打开
4. 检查是否有弹窗遮挡

---

## 📞 获取帮助

如果遇到其他问题：

1. **检查错误信息**：仔细阅读 cmd 中显示的错误信息
2. **重新测试连接**：运行 `adb devices` 确认设备连接
3. **查看日志**：脚本运行时的输出信息可能包含线索
4. **联系开发者**：将错误信息截图发送给开发者

---

## 💡 使用技巧

1. **提前准备**：
   - 在抢购开始前先测试连接
   - 提前获取按钮坐标
   - 可以先运行一次测试

2. **优化设置**：
   - 关闭手机的其他应用
   - 关闭省电模式
   - 保持手机充电

3. **提高成功率**：
   - 使用稳定的网络（WiFi 或 4G/5G）
   - 提前进入抢购页面
   - 在开始前几秒启动脚本

4. **安全提示**：
   - 不要设置过高的线程数（建议不超过 8）
   - 不要设置过小的延迟（建议不小于 0.01）
   - 避免长时间运行（可能对手机造成负担）

---

## 📝 快速参考

### 常用命令

```bash
# 测试设备连接
adb devices

# 运行快速开始（测试用）
python quick_start_adb.py

# 运行抢购脚本
python fast_click_snatch.py

# 获取 UI 层次结构
python -c "from adb_automation import ADBAutomation; auto = ADBAutomation(); auto.connect(); auto.get_ui_hierarchy('ui.xml')"
```

### 推荐配置

- **新手推荐**：
  - 线程数量：5
  - 刷新间隔：10
  - 延迟范围：0.01 - 0.05

- **稳定优先**：
  - 线程数量：3
  - 刷新间隔：15
  - 延迟范围：0.02 - 0.08

- **速度优先**：
  - 线程数量：8
  - 刷新间隔：5
  - 延迟范围：0.01 - 0.03

---

**祝抢购成功！🎉**

